"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadModule = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
// 这里提供加载所有web模块的能力
function loadModule(dir) {
    loadDir(dir);
}
exports.loadModule = loadModule;
function loadDir(dir) {
    let files = fs_1.readdirSync(dir);
    for (let i = 0; i < files.length; i++) {
        let target = path_1.join(dir, files[i]);
        if (fs_1.statSync(target).isDirectory()) {
            loadDir(target);
        }
        else {
            loadFile(target);
        }
    }
}
let loadSet = new Set();
function loadFile(filePath) {
    let lPath = path_1.parse(filePath);
    let mPath = path_1.join(lPath.dir, lPath.name);
    try {
        if (loadSet.has(mPath))
            return;
        require(mPath);
        loadSet.add(mPath);
    }
    catch (e) {
        console.error(e);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZFdlYkZpbGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibG9hZFdlYkZpbGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJCQUErRDtBQUMvRCwrQkFBbUM7QUFFbkMsbUJBQW1CO0FBQ25CLFNBQWdCLFVBQVUsQ0FBQyxHQUFXO0lBQ2xDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNoQixDQUFDO0FBRkQsZ0NBRUM7QUFFRCxTQUFTLE9BQU8sQ0FBQyxHQUFXO0lBQ3hCLElBQUksS0FBSyxHQUFHLGdCQUFXLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDNUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDbkMsSUFBSSxNQUFNLEdBQUcsV0FBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNoQyxJQUFJLGFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRTtZQUNoQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7U0FDbEI7YUFDSTtZQUNELFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUNuQjtLQUNKO0FBRUwsQ0FBQztBQUVELElBQUksT0FBTyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFFeEIsU0FBUyxRQUFRLENBQUMsUUFBZ0I7SUFDOUIsSUFBSSxLQUFLLEdBQUcsWUFBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLElBQUksS0FBSyxHQUFHLFdBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN2QyxJQUFJO1FBQ0EsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUFFLE9BQU87UUFDL0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtLQUNyQjtJQUNELE9BQU8sQ0FBQyxFQUFFO1FBQ04sT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUNuQjtBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRmlsZVN5bmMsIHJlYWRkaXJTeW5jLCBzdGF0LCBzdGF0U3luYyB9IGZyb20gXCJmc1wiO1xuaW1wb3J0IHsgam9pbiwgcGFyc2UgfSBmcm9tIFwicGF0aFwiO1xuXG4vLyDov5nph4zmj5DkvpvliqDovb3miYDmnIl3ZWLmqKHlnZfnmoTog73liptcbmV4cG9ydCBmdW5jdGlvbiBsb2FkTW9kdWxlKGRpcjogc3RyaW5nKSB7XG4gICAgbG9hZERpcihkaXIpXG59XG5cbmZ1bmN0aW9uIGxvYWREaXIoZGlyOiBzdHJpbmcpIHtcbiAgICBsZXQgZmlsZXMgPSByZWFkZGlyU3luYyhkaXIpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gam9pbihkaXIsIGZpbGVzW2ldKVxuICAgICAgICBpZiAoc3RhdFN5bmModGFyZ2V0KS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgICAgICBsb2FkRGlyKHRhcmdldClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvYWRGaWxlKHRhcmdldClcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5sZXQgbG9hZFNldCA9IG5ldyBTZXQoKTsgXG5cbmZ1bmN0aW9uIGxvYWRGaWxlKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICBsZXQgbFBhdGggPSBwYXJzZShmaWxlUGF0aCk7XG4gICAgbGV0IG1QYXRoID0gam9pbihsUGF0aC5kaXIsIGxQYXRoLm5hbWUpXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGxvYWRTZXQuaGFzKG1QYXRoKSkgcmV0dXJuO1xuICAgICAgICByZXF1aXJlKG1QYXRoKVxuICAgICAgICBsb2FkU2V0LmFkZChtUGF0aClcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgIH1cbn0iXX0=